import{a as q}from"./chunk-PDGOAUB3.js";import{a as O}from"./chunk-HX3LTQFW.js";import{a as F}from"./chunk-QQMNRYBR.js";import{d as V}from"./chunk-EMSCSQA7.js";import{Ca as h,Eb as P,Fb as D,Gb as E,Ha as p,Hb as T,Ib as w,S as x,Sa as s,Ta as n,Ua as r,Va as k,Wa as f,X as u,Xa as _,Y as m,Ya as l,bb as S,cb as c,db as v,eb as g,ib as b,kb as y,lb as I,qa as C,sa as o}from"./chunk-2UJNR4Y7.js";var Q=i=>({disabled:i});function $(i,e){i&1&&(n(0,"div",3)(1,"p"),c(2,"Loading product details..."),r()())}function B(i,e){if(i&1){let t=f();n(0,"div",4)(1,"p"),c(2,"Error loading product. Please try again."),r(),n(3,"button",5),_("click",function(){u(t);let d=l();return m(d.retry())}),c(4,"Retry"),r()()}}function z(i,e){if(i&1){let t=f();n(0,"img",26),_("click",function(){let d=u(t).$implicit,M=l(3);return m(M.selectImage(d))}),r()}if(i&2){let t=e.$implicit,a=l(3);S("selected",t===a.selectedImage),s("src",t,C)}}function A(i,e){if(i&1&&(n(0,"div",24),p(1,z,1,3,"img",25),r()),i&2){let t=l(2);o(),s("ngForOf",t.product.images)}}function R(i,e){if(i&1&&(n(0,"span"),c(1," \u2605 "),r()),i&2){let t=e.$implicit;S("filled",t)("empty",!t)}}function U(i,e){if(i&1&&(n(0,"span",27),c(1),r()),i&2){let t=l(2);o(),g(" $",t.product.price.toFixed(2)," ")}}function j(i,e){if(i&1){let t=f();n(0,"div",28)(1,"label"),c(2,"Quantity:"),r(),n(3,"div",29)(4,"button",5),_("click",function(){u(t);let d=l(2);return m(d.decreaseQuantity())}),c(5,"\u2212"),r(),n(6,"span"),c(7),r(),n(8,"button",5),_("click",function(){u(t);let d=l(2);return m(d.increaseQuantity())}),c(9,"+"),r()()()}if(i&2){let t=l(2);o(7),v(t.quantity)}}function L(i,e){if(i&1){let t=f();n(0,"section",6)(1,"div",7)(2,"div",8),k(3,"img",9),p(4,A,2,1,"div",10),r(),n(5,"div",11)(6,"h1",12),c(7),r(),n(8,"p",13),c(9),r(),n(10,"div",14)(11,"span",15),p(12,R,2,4,"span",16),r(),n(13,"span",17),c(14),r()(),n(15,"div",18),p(16,U,2,1,"span",19),n(17,"strong",20),c(18),y(19,"discount"),y(20,"number"),r()(),n(21,"div",21),c(22),r(),p(23,j,10,1,"div",22),n(24,"button",23),_("click",function(){u(t);let d=l();return m(d.addToCart())}),c(25),r()()()()}if(i&2){let t=l();o(3),s("src",t.selectedImage,C),o(),s("ngIf",t.product.images==null?null:t.product.images.length),o(3),v(t.product.title),o(2),v(t.product.description),o(3),s("ngForOf",t.generateStars(t.product.rating)),o(2),g("(",t.product.rating,")"),o(2),s("ngIf",t.product.discountPercentage>0),o(2),g(" $",I(20,17,I(19,14,t.product.price,t.product.discountPercentage),"1.2-2")," "),o(3),s("ngClass",t.getStockStatusClass(t.product.stock)),o(),g(" ",t.getStockStatus(t.product.stock)," "),o(),s("ngIf",t.product.stock>0),o(),s("disabled",t.product.stock===0)("ngClass",b(20,Q,t.product.stock===0)),o(),g(" ",t.product.stock===0?"Out of Stock":"Add to Cart"," ")}}var N=class i{product=null;selectedImage="";quantity=1;loading=!0;error=!1;route=x(V);productService=x(q);cartService=x(F);ngOnInit(){let e=Number(this.route.snapshot.paramMap.get("id"));e&&this.loadProduct(e)}retry(){let e=Number(this.route.snapshot.paramMap.get("id"));e&&this.loadProduct(e)}loadProduct(e){this.loading=!0,this.error=!1,this.productService.getProductById(e).subscribe({next:t=>{this.product=t,this.selectedImage=t.thumbnail||t.images?.[0]||"",this.loading=!1},error:t=>{console.error("Error loading product:",t),this.error=!0,this.loading=!1}})}selectImage(e){this.selectedImage=e}increaseQuantity(){this.quantity++}decreaseQuantity(){this.quantity>1&&this.quantity--}addToCart(){this.product&&this.product.stock>0&&this.cartService.addToCart(this.product,this.quantity)}getStockStatus(e){return e>0?"In Stock":"Out of Stock"}getStockStatusClass(e){return e>0?"in-stock":"out-of-stock"}generateStars(e){let t=[];for(let a=1;a<=5;a++)t.push(a<=e);return t}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=h({type:i,selectors:[["app-product-details"]],decls:3,vars:3,consts:[["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","product-detail",4,"ngIf"],[1,"loading"],[1,"error"],[3,"click"],[1,"product-detail"],[1,"product-detail__container"],[1,"product-detail__images"],["alt","Main Image",1,"main-image",3,"src"],["class","thumbnail-row",4,"ngIf"],[1,"product-detail__info"],[1,"product-title"],[1,"product-description"],[1,"rating"],[1,"stars"],[3,"filled","empty",4,"ngFor","ngForOf"],[1,"rating-text"],[1,"price-block"],["class","original-price",4,"ngIf"],[1,"discounted-price"],[1,"stock-status",3,"ngClass"],["class","quantity-selector",4,"ngIf"],[1,"add-to-cart-btn",3,"click","disabled","ngClass"],[1,"thumbnail-row"],["alt","Thumbnail",3,"src","selected","click",4,"ngFor","ngForOf"],["alt","Thumbnail",3,"click","src"],[1,"original-price"],[1,"quantity-selector"],[1,"quantity-controls"]],template:function(t,a){t&1&&p(0,$,3,0,"div",0)(1,B,5,0,"div",1)(2,L,26,22,"section",2),t&2&&(s("ngIf",a.loading),o(),s("ngIf",a.error),o(),s("ngIf",a.product&&!a.loading&&!a.error))},dependencies:[w,P,D,E,T,O],encapsulation:2})};export{N as ProductDetailsComponent};
