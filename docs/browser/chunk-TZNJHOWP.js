import{a as O}from"./chunk-BIGH6345.js";import{a as q}from"./chunk-ZXAUGKJU.js";import{d as V}from"./chunk-WC5MS3VU.js";import{i as D,j as T,k as E,l as N,m as W}from"./chunk-2XSTSFZT.js";import{$a as k,Ea as C,Ja as m,S as g,X as p,Y as u,Ya as a,Za as n,_a as o,a as y,ab as v,b as I,db as _,eb as l,jb as w,kb as s,lb as h,mb as f,ra as x,rb as P,sb as S,ta as c,tb as b}from"./chunk-DS7ZCNFW.js";var M=(i,e,t)=>({"in-stock":i,"low-stock":e,"out-of-stock":t});function $(i,e){if(i&1){let t=v();n(0,"img",19),_("click",function(){let d=p(t).$implicit,Q=l(3);return u(Q.selectImage(d))}),o()}if(i&2){let t=e.$implicit,r=l(3);w("selected",t===r.selectedImage),a("src",t,x)}}function B(i,e){if(i&1&&(n(0,"div",17),m(1,$,1,3,"img",18),o()),i&2){let t=l(2);c(),a("ngForOf",t.product.images)}}function J(i,e){if(i&1&&(n(0,"span",20),s(1),S(2,"number"),o()),i&2){let t=l(2);c(),f(" $",b(2,1,t.product.price*(1+t.product.discountPercentage/100),"1.2-2")," ")}}function z(i,e){if(i&1){let t=v();n(0,"section",1)(1,"div",2)(2,"div",3),k(3,"img",4),m(4,B,2,1,"div",5),o(),n(5,"div",6)(6,"h1",7),s(7),o(),n(8,"p",8),s(9),o(),n(10,"div",9),m(11,J,3,4,"span",10),n(12,"strong",11),s(13),S(14,"number"),o()(),n(15,"div",12),s(16),o(),n(17,"div",13)(18,"label"),s(19,"Quantity:"),o(),n(20,"div",14)(21,"button",15),_("click",function(){p(t);let d=l();return u(d.decreaseQuantity())}),s(22,"\u2212"),o(),n(23,"span"),s(24),o(),n(25,"button",15),_("click",function(){p(t);let d=l();return u(d.increaseQuantity())}),s(26,"+"),o()()(),n(27,"button",16),_("click",function(){p(t);let d=l();return u(d.addToCart())}),s(28," Add to Cart "),o()()()()}if(i&2){let t=l();c(3),a("src",t.selectedImage||t.product.thumbnail,x),c(),a("ngIf",t.product.images==null?null:t.product.images.length),c(3),h(t.product.title),c(2),h(t.product.description),c(2),a("ngIf",t.product.discountPercentage),c(2),f(" $",b(14,10,t.product.price,"1.2-2")," "),c(2),a("ngClass",P(13,M,t.product.availabilityStatus==="In Stock",t.product.availabilityStatus==="Low in Stock",t.product.availabilityStatus==="Not in Stock")),c(),f(" ",t.product.availabilityStatus," "),c(8),h(t.quantity),c(3),a("disabled",t.product.availabilityStatus==="Not in Stock")}}var F=class i{route=g(V);productService=g(O);cartService=g(q);product;selectedImage="";quantity=1;isInWishlist=!1;ngOnInit(){let e=Number(this.route.snapshot.paramMap.get("id"));e&&this.productService.getProductById(e).subscribe(t=>{this.product=t,this.selectedImage=t.thumbnail||t.images?.[0]||"",this.isInWishlist=this.checkWishlist(t.id)})}selectImage(e){this.selectedImage=e}increaseQuantity(){this.quantity++}decreaseQuantity(){this.quantity>1&&this.quantity--}addToCart(){if(this.product.availabilityStatus==="Not in Stock")return;let e=I(y({},this.product),{quantity:this.quantity});this.cartService.addToCart(e)}toggleWishlist(){let e=this.getWishlist();if(this.isInWishlist){let t=e.filter(r=>r.id!==this.product.id);localStorage.setItem("wishlist",JSON.stringify(t))}else e.push(this.product),localStorage.setItem("wishlist",JSON.stringify(e));this.isInWishlist=!this.isInWishlist}checkWishlist(e){return this.getWishlist().some(r=>r.id===e)}getWishlist(){return JSON.parse(localStorage.getItem("wishlist")||"[]")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=C({type:i,selectors:[["app-product-details"]],decls:1,vars:1,consts:[["class","product-detail",4,"ngIf"],[1,"product-detail"],[1,"product-detail__container"],[1,"product-detail__images"],["alt","Main Image",1,"main-image",3,"src"],["class","thumbnail-row",4,"ngIf"],[1,"product-detail__info"],[1,"product-title"],[1,"product-description"],[1,"price-block"],["class","old-price",4,"ngIf"],[1,"new-price"],[1,"stock-status",3,"ngClass"],[1,"quantity-selector"],[1,"quantity-controls"],[3,"click"],[1,"add-to-cart-btn",3,"click","disabled"],[1,"thumbnail-row"],["alt","Thumbnail",3,"src","selected","click",4,"ngFor","ngForOf"],["alt","Thumbnail",3,"click","src"],[1,"old-price"]],template:function(t,r){t&1&&m(0,z,29,17,"section",0),t&2&&a("ngIf",r.product)},dependencies:[W,D,T,E,N],encapsulation:2})};export{F as ProductDetailsComponent};
