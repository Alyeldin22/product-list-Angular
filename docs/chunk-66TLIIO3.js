import{a as V}from"./chunk-PDGOAUB3.js";import{a as M}from"./chunk-HX3LTQFW.js";import{a as B}from"./chunk-QQMNRYBR.js";import{f as D}from"./chunk-EMSCSQA7.js";import{Ca as g,Eb as W,Fb as x,Gb as I,Ha as l,Hb as N,Ib as P,S as u,Sa as p,Ta as o,Ua as c,Va as _,Wa as S,X as m,Xa as v,Y as f,Ya as d,bb as T,cb as a,db as C,eb as s,fb as F,ib as w,kb as b,lb as h,qa as E,rb as O,sa as r}from"./chunk-2UJNR4Y7.js";var A=e=>({disabled:e});function U(e,i){if(e&1&&(o(0,"span"),a(1," \u2605 "),c()),e&2){let t=i.$implicit;T("filled",t)("empty",!t)}}function q(e,i){if(e&1&&(o(0,"span",15),a(1),c()),e&2){let t=d().ngIf;r(),s(" $",t.price.toFixed(2)," ")}}function G(e,i){if(e&1){let t=S();o(0,"div",1)(1,"div",2),a(2),c(),o(3,"a",3),_(4,"img",4),c(),o(5,"h3",5),a(6),c(),o(7,"p",6),a(8),c(),o(9,"div",7)(10,"span",8),l(11,U,2,4,"span",9),c(),o(12,"span",10),a(13),c()(),o(14,"div",11),l(15,q,2,1,"span",12),o(16,"span",13),a(17),b(18,"discount"),b(19,"number"),c()(),o(20,"button",14),v("click",function(){let y=m(t).ngIf,$=d();return f($.addToCart(y))}),a(21),c()()}if(e&2){let t=i.ngIf,n=d();r(),p("ngClass",n.getStockStatusClass(t.stock)),r(),s(" ",n.getStockStatus(t.stock)," "),r(),p("routerLink","/products/"+t.id),r(),p("alt",F(t.title))("src",t.thumbnail,E),r(2),C(t.title),r(2),C(t.description),r(3),p("ngForOf",n.generateStars(t.rating)),r(2),s("(",t.rating,")"),r(2),p("ngIf",t.discountPercentage>0),r(2),s(" $",h(19,18,h(18,15,t.price,t.discountPercentage),"1.2-2")," "),r(3),p("disabled",t.stock===0)("ngClass",w(21,A,t.stock===0)),r(),s(" ",t.stock===0?"Out of Stock":"Add to Cart"," ")}}var k=class e{_product=O();cartService=u(B);addToCart(i){this.cartService.addToCart(i)}getStockStatus(i){return i>0?"In Stock":"Out of Stock"}getStockStatusClass(i){return i>0?"in-stock":"out-of-stock"}generateStars(i){let t=[];for(let n=1;n<=5;n++)t.push(n<=i);return t}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["app-product-section"]],inputs:{_product:[1,"_product"]},decls:1,vars:1,consts:[["class","product-card",4,"ngIf"],[1,"product-card"],[1,"stock-label",3,"ngClass"],[1,"product-link",3,"routerLink"],[1,"product-image",3,"src","alt"],[1,"product-title"],[1,"description"],[1,"rating"],[1,"stars"],[3,"filled","empty",4,"ngFor","ngForOf"],[1,"rating-text"],[1,"price-container"],["class","original-price",4,"ngIf"],[1,"discounted-price"],[1,"add-to-cart-btn",3,"click","disabled","ngClass"],[1,"original-price"]],template:function(t,n){t&1&&l(0,G,22,23,"div",0),t&2&&p("ngIf",n._product())},dependencies:[P,W,x,I,N,D,M],encapsulation:2})};function H(e,i){e&1&&(o(0,"div",5)(1,"p"),a(2,"Loading products..."),c(),o(3,"p"),a(4,"Please wait while we fetch the latest products."),c()())}function J(e,i){if(e&1){let t=S();o(0,"div",6)(1,"p"),a(2,"Error loading products. Please try again."),c(),o(3,"p"),a(4,"Check the browser console for more details."),c(),o(5,"button",7),v("click",function(){m(t);let y=d();return f(y.loadProducts())}),a(6,"Retry"),c()()}}function K(e,i){if(e&1&&(o(0,"div",8)(1,"p"),a(2),c()()),e&2){let t=d();r(2),s("Products loaded: ",t.products.length)}}function Q(e,i){if(e&1&&_(0,"app-product-section",11),e&2){let t=i.$implicit;p("_product",t)}}function X(e,i){if(e&1&&(o(0,"section",9),l(1,Q,1,1,"app-product-section",10),c()),e&2){let t=d();r(),p("ngForOf",t.products)("ngForTrackBy",t.trackByProductId)}}function Y(e,i){e&1&&(o(0,"div",12)(1,"p"),a(2,"No products found."),c()())}var L=class e{products=[];loading=!0;error=!1;productService=u(V);ngOnInit(){console.log("WrapperSection: ngOnInit called"),this.loadProducts()}loadProducts(){console.log("WrapperSection: loadProducts called"),this.loading=!0,this.error=!1,console.log("Loading products..."),this.productService.getProducts().subscribe({next:i=>{console.log("Products loaded:",i),console.log("Products array length:",i.products?.length),this.products=i.products||[],this.loading=!1,console.log("Final products array:",this.products)},error:i=>{console.error("Error loading products:",i),this.error=!0,this.loading=!1}})}trackByProductId(i,t){return t.id}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["app-wrapper-section"]],decls:7,vars:5,consts:[["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","debug-info",4,"ngIf"],["class","product-list",4,"ngIf"],["class","no-products",4,"ngIf"],[1,"loading"],[1,"error"],[3,"click"],[1,"debug-info"],[1,"product-list"],[3,"_product",4,"ngFor","ngForOf","ngForTrackBy"],[3,"_product"],[1,"no-products"]],template:function(t,n){t&1&&(o(0,"h1"),a(1,"Products"),c(),l(2,H,5,0,"div",0)(3,J,7,0,"div",1)(4,K,3,1,"div",2)(5,X,2,2,"section",3)(6,Y,3,0,"div",4)),t&2&&(r(2),p("ngIf",n.loading),r(),p("ngIf",n.error),r(),p("ngIf",!n.loading&&!n.error),r(),p("ngIf",!n.loading&&!n.error&&n.products.length>0),r(),p("ngIf",!n.loading&&!n.error&&n.products.length===0))},dependencies:[P,x,I,k],encapsulation:2})};export{L as WrapperSection};
